<!DOCTYPE html>

<html>

<head>

	<meta charset="utf-8">
	<title>test</title>
	<!-- Ligne nécessaire pour l'utilisation du JQuery -->
	  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>

	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
	<script type="text/javascript" src="annuaire.json"></script>
	<script type="text/javascript" src="annuaire.js"></script>

</head>

<body>

	<div class="global">
		
		<h1>Liste des élèves</h1>

		<button id="aperçu" onclick="clicmoi()" class="btn btn-primary"> Aperçu </button>

			<ul id="list-group"></ul>

			
		<button id="ajout" onclick="ajoutEntree()" class="btn btn-primary">Ajouter une nouvelle entrée</button>

	</div>

</body>


<script type="text/javascript">


function clicmoi()
{
	var maliste = document.getElementById('list-group');
	console.log(maliste);

	myJson.forEach (function(element)
	{
		var maligne = document.createElement("li");
		maligne.innerHTML = element.nom + " " + element.prenom + ".";
		maligne.classList.add("list-group-item");
		maligne.setAttribute("data-idEleve",element.id);
		maligne.addEventListener("click", detectClick);
		maliste.appendChild(maligne);
		 
	});

	function detectClick(event)
	{
		console.log(this);
		console.log(event);
		console.log(event.target);
		var myTarget = event.target;

		console.log(myTarget.getAttribute("data-idEleve"));

		window.location = "profil.html" + "#" + myTarget.getAttribute("data-idEleve");
	}

}

function ajoutEntree()
{
	window.location = "ajout.html";
}


//Fonction identique avec utilisation du JQuery
		/*$(document).ready(function() { 	
              	
              	$('#aperçu').click(function()
					{
						var maliste = document.getElementById('liste');
						console.log(maliste);

						myJson.forEach (function(element)
						{
							var maligne = document.createElement("li");
							maligne.innerHTML = "Je m'appelle "+ element.nom + "  " + element.prenom;

							maliste.appendChild(maligne);

							 console.log(element);
							 
						});
					});
                  
        	 });*/

			</script>
</html>
